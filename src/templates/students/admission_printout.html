{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Admission Printout</title>
        <meta charset="UTF-8">
        <meta name="description" content="Student admission form printout">
        <meta name="keywords" content="admission, student, school, form, printout">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{% static 'css/print.css' %}">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <style>
            @font-face {
                font-family: 'Algerian';
                src: url('{% static "fonts/algerian.ttf" %}') format('truetype');
            }
            #school-name {
                font-family: 'Algerian';
                color: #0000a5ff;
            }
            @media print {
                /* Set A4 size for printing */
                @page {
                  size: A4;
                  margin: 20mm;
                }
                transform: scale(0.45); /* Adjust this value depending on how much overflows */
                page-break-before: auto;
            }
            
        </style>
    </head>
    <body class="font-sans bg-gradient-to-br from-white to-blue-50 max min-h-screen py-8">
        <div id="print-container"
             class="print-container max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg border border-gray-200">
            <!-- Header with School Info -->
            <div class="flex flex-col md:flex-row items-center justify-between border-b border-gray-300 pb-6">
                <div class="flex items-center gap-6">
                    <img src="{{ school_logo }}"
                         alt="School Logo"
                         class="w-24 h-auto rounded-lg shadow-md object-contain"
                         width="150"
                         height="200">
                    <div class="text-center md:text-left">
                        <p class="text-sm inline-block font-medium text-gray-600 mb-1">{{ school_code }}</p>
                        <h2 id="school-name" class="text-3xl font-bold">{{ school_name }}</h2>
                        <p class="text-sm mt-2 text-gray-600">Raishree Chauraha, Gauri Bazar, 274202</p>
                    </div>
                </div>
                <div class="mt-4 md:mt-0 md:text-right">
                    <p class="text-sm font-medium text-gray-1000">Admission Form</p>
                    <p class="text-sm text-gray-1000">Serial Number: {{ student_serial }}</p>
                    <p class="text-sm text-gray-1000">Admission Date: {{ student_admission.admission_date }}</p>
                </div>
            </div>
            <!-- Student Details -->
            <div class="my-6 flex flex-col md:flex-row gap-6 items-center">
                <!-- Image with vertical centering -->
                <img src="{{ profile_photo_url }}"
                     alt="Student Photo"
                     class="w-32 h-40 object-cover rounded-lg border-2 border-gray-300 shadow-md mx-auto md:mx-0 my-auto"
                     width="150"
                     height="200">
                <!-- Details Container -->
                <div class="flex-1 bg-gray-100 p-4 rounded-lg">
                    <h3 class="text-xl font-bold text-blue-800 border-b border-gray-300 pb-2 mb-3">Student Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2">
                        <div class="col-span-2">
                            <h4 class="text-lg font-semibold text-gray-800">{{ student.user.first_name }} {{ student.user.last_name }}</h4>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Class:</span> {{ student_admission.student_class }}-{{ student_admission.section }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Roll Number:</span> {{ student_admission.roll_number }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Pen Number:</span> {{ student.pen_number }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Apaar ID:</span> {{ student.apaar_id }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Date of Birth:</span> {{ student.user.dob }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Gender:</span> {{ student.user.gender }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Height:</span> {{ student.height }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Weight:</span> {{ student.weight }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Blood Group:</span> {{ student.user.blood_group }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Religion:</span> {{ student.user.religion }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Caste:</span> {{ student.user.caste }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Category:</span> {{ student.user.category }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Phone:</span> {{ student.user.phones.all.0.phone_number }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Email:</span> {{ student.user.email }}
                            </p>
                        </div>
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Aadhaar:</span> {{ student.user.aadhar_number }}
                            </p>
                        </div>
                        {% if student_admission.is_rte %}
                            <div>
                                <p class="text-sm">
                                    <span class="font-medium text-gray-600">RTE:</span> Yes
                                </p>
                            </div>
                        {% endif %}
                        <div>
                            <p class="text-sm">
                                <span class="font-medium text-gray-600">Session:</span> {{ student_admission.session }}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Parents Details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-6">
                <!-- Mother's Details -->
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="text-lg font-bold text-blue-800 border-b border-gray-300 pb-2 mb-3">Mother's Details</h3>
                    <div class="space-y-2">
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Name:</span> {{ mother_name }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Occupation:</span> {{ mother_occupation }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Aadhaar:</span> {{ mother_aadhar }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Email:</span> {{ mother.user.email }}
                        </p>
                        <div>
                            <p class="text-sm font-medium text-gray-600">Phone Numbers:</p>
                            <ul class="list-disc ml-5 text-sm text-gray-700">
                                {% for phone in mother_phones %}<li>{{ phone.phone_number }}</li>{% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Father's Details -->
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="text-lg font-bold text-blue-800 border-b border-gray-300 pb-2 mb-3">Father's Details</h3>
                    <div class="space-y-2">
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Name:</span> {{ father_name }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Occupation:</span> {{ father_occupation }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Aadhaar:</span> {{ father_aadhar }}
                        </p>
                        <p class="text-sm">
                            <span class="font-medium text-gray-600">Email:</span> {{ father.user.email }}
                        </p>
                        <div>
                            <p class="text-sm font-medium text-gray-600">Phone Numbers:</p>
                            <ul class="list-disc ml-5 text-sm text-gray-700">
                                {% for phone in father_phones %}<li>{{ phone.phone_number }}</li>{% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Address Information -->
            <div class="bg-gray-100 p-4 rounded-lg my-6">
                <h3 class="text-lg font-bold text-blue-800 border-b border-gray-300 pb-2 mb-3">Address Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Address:</span> {{ student.user.village }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Pincode:</span> {{ student.user.pincode }}
                    </p>
                </div>
            </div>
            <!-- Board Details -->
            {% if board_details %}
            <div class="bg-gray-100 p-4 rounded-lg my-6">
                <h3 class="text-lg font-bold text-blue-800 border-b border-gray-300 pb-2 mb-3">Class {{ board_details.student_class }} Details {% if board_details.subject_group %}({{ board_details.subject_group }}){% endif %}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Roll Number:</span> {{ board_details.roll_no }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Board:</span> {{ board_details.board }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">College:</span> {{ board_details.school }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Passing Year:</span> {{ board_details.passing_year }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Obtained Marks:</span> {{ board_details.score }}/{{ board_details.mm }}
                    </p>
                    <p class="text-sm">
                        <span class="font-medium text-gray-600">Percentage:</span> {{ board_details.percent }}
                    </p>
                </div>
            </div>
            {% endif %}
            <!-- Signatures Section -->
            <div class="mt-10 border-t border-gray-300 pt-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center">
                    <div>
                        <div class="h-20 border-b border-gray-400 mb-2"></div>
                        <p class="text-sm font-medium text-gray-700">Principal's Signature and Stamp</p>
                    </div>
                    <div>
                        <div class="h-20 border-b border-gray-400 mb-2"></div>
                        <p class="text-sm font-medium text-gray-700">Guardian's Signature and Thumb Impression</p>
                    </div>
                </div>
            </div>
            <!-- Footer -->
            <div class="mt-8 text-center text-xs text-gray-1000">
                <p>This document serves as the official record of admission to {{ school_name }}.</p>
                <p class="mt-1">Document generated on {% now "F j, Y" %}</p>
            </div>
        </div>
    </body>
</html>
